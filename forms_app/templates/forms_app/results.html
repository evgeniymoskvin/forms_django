<!DOCTYPE html>
<html lang="ru" class="hide-scroll">
<head>
    {% load static %}
    {#    {% load phonebook_tags %}#}
    <meta charset="UTF-8">
    <title>
        {% block title %}
            {{ name_of_category }}
        {% endblock %}
    </title>
    <link rel="stylesheet" type="text/css"
          href="{% static 'forms_app/DataTables/datatables.css' %}"/>
    <link rel="stylesheet" type="text/css" href="{% static 'forms_app/Bootstrap-5-5.1.3/css/bootstrap.css' %}"/>
    <link rel="stylesheet" type="text/css" href="{% static 'forms_app/css/forms-style.css' %}"/>

    <script type="text/javascript"
            src="{% static 'forms_app/Bootstrap-5-5.1.3/js/bootstrap.bundle.js' %}"></script>
    {#    <script type="text/javascript" src="{% static 'kks_reestr_app/Bootstrap-5-5.1.3/js/bootstrap.min.js' %}"></script>#}
    <script type="text/javascript" src="{% static 'forms_app/jQuery-3.6.0/jquery-3.6.0.min.js' %}"></script>
    <script type="text/javascript" src="{% static 'forms_app/Bootstrap-5-5.1.3/js/bootstrap.min.js' %}"></script>
    <script type="text/javascript"
            src="{% static 'forms_app/DataTables/datatables.js' %}"></script>


</head>

<body class="content-fade">

<div class="container">
    <div class="d-flex w-100" id="display_div">
        <div style="width: 100%">
            <div class="d-flex text-48px-bold" style="margin-top: 50px">
                Результаты опроса
            </div>
            <div class="d-flex text-32px-light" style="line-height: 120%">
                "{{ name_of_category }}"
            </div>
            <div class="text-16px-light mt-3"> Всего ответило: {{ len_answer_dict }}</div>
            <div class="mt-3">
                <table id="all-answers" class="table table-hover">
                    <thead>
                    <tr>
                        <th class="th_tables" scope="col" style="width: 30px">#</th>
                        {% for column in columns %}
                            <th class="th_tables" scope="col" style="text-align: center;">{{ column.question }}</th>
                        {% endfor %}
                    </tr>
                    </thead>

                    <tbody id="table_inside">
                    {% for key, value in answer_dict.items %}
                        <tr class="tr-tables">
                            <th class="th_tables" scope="row">{{ key }}</th>
                            {% for val in value %}
                                <td class="td_tables" style="text-align: center">

                                    {% if val.answer.answer_text %}
                                        {{ val.answer.answer_text }}
                                    {% else %}
                                        {{ val.answer_text }}
                                    {% endif %}

                                </td>
                            {% endfor %}
                        </tr>
                    {% endfor %}
                    </tbody>
                </table>
            </div>
            <div id="loader_tasks" class="d-flex w-100 justify-content-center">
                <div class="loader-big"></div>
            </div>
        </div>
    </div>


</div>

<script>
            $(document).ready(function () {
            var table = $('#all-answers').DataTable({
                    {#order: [[1, 'asc']],#}
                    dom:
                    //"<'row'<'col-sm-12'tr>>",
                    //"<'row'<'col-sm-12 col-md-2'l><'col-sm-2 col-md-2 col-xxl-4'B><'col-sm-12 col-md-6'f>>" +
                    //    "<'row'<'col-sm-12 col-md-6'l><'col-sm-12 col-md-6'f>>" +
                        "<'row'<'col-sm-12'tr>>" +
                        //"<'row'<'col-sm-12 col-md-5'i><'col-sm-12 col-md-7'p>>",
                    //    "<'row'<'col-sm-12 col-md-5'i><'col-sm-12 col-md-7'p>>" +
                        "<'col-sm-2 col-md-2 col-xxl-2'B>",
                    "language": {
                        "lengthMenu": "_MENU_",
                        "zeroRecords": "Записи не найдены",
                        "info": "Показано с _START_ по _END_ из _TOTAL_ записей",
                        "search": "Поиск:",
                        "paginate": {
                            "next": "Следующая",
                            "previous": "Предыдущая"
                        }
                    },
                    "aLengthMenu": [[1, 5, 10, 15, 20, 25, -1], [1, 5, 10, 15, 20, 25, "Все"]],
                    "iDisplayLength": -1,
                    buttons: ['pdf', 'excel']
                }
            );
            table.buttons().container()
                .appendTo($('.col-sm-6:eq(0)', table.table().container()));

        });
</script>

</body>